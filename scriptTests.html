<!-- //Eventbrite: Application Key: 45DABWN3ESGYPW3WCO -->

<!-- OAuth Client Secret: CWW3XAODQ445GC3R7OVHCH2JNPYXMATNKFVIFYHUX3Q6HXOOJF -->

<!-- Client secret    CWW3XAODQ445GC3R7OVHCH2JNPYXMATNKFVIFYHUX3Q6HXOOJF
Private API key  CPVWVW6L7AVR3C3JBHFI
Public API key   YENRWF66AL2C22NHOODG -->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Script Tests</title>
    <script src="https://code.jquery.com/jquery-3.4.1.js" integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU="
        crossorigin="anonymous"></script>

            <!-- The core Firebase JS SDK is always required and must be listed first -->
    <script src="https://www.gstatic.com/firebasejs/6.2.0/firebase-app.js"></script>

    <script src="https://www.gstatic.com/firebasejs/6.2.0/firebase-database.js"></script>

    <script src=“https://apis.google.com/js/api.js“></script>

</head>
<body>
    






<script>
// Your web app's Firebase configuration
const firebaseConfig = {
  apiKey: "AIzaSyADLELNaDJAo8AO85e16M2dTTPhFmlluUk",
  authDomain: "eventplus-6436b.firebaseapp.com",
  databaseURL: "https://eventplus-6436b.firebaseio.com",
  projectId: "eventplus-6436b",
  storageBucket: "eventplus-6436b.appspot.com",
  messagingSenderId: "658113048583",
  appId: "1:658113048583:web:cf53e50460400b32"
};
// Initialize Firebase
firebase.initializeApp(firebaseConfig);
// Get a reference to the database service
var db = firebase.database();

//Google YouTube API
$.ajax({
    url: “https://www.googleapis.com/youtube/v3/search?part=snippet&maxResults=3&q=spoon&key=AIzaSyDKMnHY4LsuosAckGD5kSmHYrumOVHewpI“,
    method: “GET”
}).then(function (response){
    console.log(“Response”, response);
})



//SeatGeek API
var queryString = "https://api.seatgeek.com/2/events?client_id=MTcwMTc2ODJ8MTU2MDQ1NDI2Ni45OA";
var resultSet;
$.ajax({
    url: queryString,
    method: "GET"
}).then(function (response){
    debugger;
    console.log(response);
    //create an object to add the records to the Firebase DB
    resultSet = response.events;
    writeRecords(resultSet);
})

function writeRecords(apiData){
    for(var i = 0; i < resultSet.length; i++){
        var recordData = {
            eventPlusID: "xyz123",
            title: resultSet[i].title,
            source: "SeatGeek",
            vendorID: resultSet[i].id,
            localTime: resultSet[i].datetime_local,
            utcTime: resultSet[i].datetime_utc,
            image: resultSet[i].image,
            popularity: resultSet[i].popularity,
            type: resultSet[i].type,
            lowPrice: resultSet[i].stats.lowest_price,
            highPrice: resultSet[i].stats.highest_price,
            venueName: resultSet[i].venue.location.name,
            venueURL: resultSet[i].venue.location.url,
            venueStreetAddress: resultSet[i].venue.address,
            venueCity: resultSet[i].venue.city,
            venueCountry: resultSet[i].venue.country,
            venueDisplayLocation: resultSet[i].venue.display_location,
            venueCapacity: resultSet[i].venue.capacity
        }
        
        if (resultSet[i].performers.length < 4){
            recordData.performers = resultSet[i].performers
        }
        else {
            recordData.performers = resultSet[i].performers.slice(0, 3);
        }
        //commit the new row to the DB
        debugger;
        console.log(recordData);
        db.ref("events").push(JSON.stringify(recordData));
    }


}

</script>
</body>
</html>